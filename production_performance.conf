# VisualGasic Production Performance Configuration
# Optimized settings for maximum performance in production environments

[profiling]
# Enable advanced profiling
enabled = true
sampling_interval_ms = 1.0
profile_memory = true
profile_cpu = true
profile_disk_io = true
profile_network = false
export_format = json
export_interval_minutes = 60

# Hot path detection
hot_path_threshold_executions = 50
hot_path_threshold_time_ms = 5.0
hot_path_instruction_min = 25
hot_path_instruction_max = 50000

[jit_compilation]
# JIT compiler settings
enabled = true
compilation_mode = aggressive
background_compilation = true
max_compilation_threads = 4
compilation_timeout_ms = 5000

# JIT thresholds
baseline_threshold = 25
optimized_threshold = 100
aggressive_threshold = 500

# Pattern optimization
enable_arithmetic_optimization = true
enable_string_optimization = true
enable_loop_optimization = true
enable_array_optimization = true
enable_vectorization = true

[memory_optimization]
# Memory pool settings
enable_memory_pools = true
small_pool_size_mb = 16
medium_pool_size_mb = 64
large_pool_size_mb = 256
pool_growth_factor = 1.5
max_pool_memory_mb = 2048

# String interning
enable_string_interning = true
string_intern_cache_size = 100000
string_intern_max_length = 1024
intern_threshold_usage = 3

# AST optimization
enable_ast_optimization = true
ast_cache_size = 50000
ast_node_pooling = true
compress_ast_storage = true

[simd_optimization]
# SIMD settings
enabled = true
instruction_set = auto  # auto, sse4.2, avx, avx2, avx512
vector_size = auto      # auto, 128, 256, 512
min_vector_operations = 4
enable_fma = true
enable_horizontal_ops = true

# Operation-specific SIMD
simd_arithmetic = true
simd_string_ops = true
simd_array_ops = true
simd_comparison_ops = true

[async_optimization]
# Async batching
enable_async_batching = true
batch_size = 100
batch_timeout_ms = 10
max_concurrent_batches = 8

# Task scheduling
scheduler_type = work_stealing  # round_robin, work_stealing, priority
max_worker_threads = 0          # 0 = auto (CPU count)
thread_affinity = false
enable_numa_awareness = true

# Synchronization
lock_free_data_structures = true
minimize_context_switches = true
use_futex_optimization = true

[caching]
# Execution caching
enable_expression_cache = true
expression_cache_size = 25000
cache_threshold_executions = 5

# Compilation caching
enable_compilation_cache = true
compilation_cache_size_mb = 128
cache_expiry_hours = 24
persistent_cache = true
cache_validation = checksum

# Symbol table caching
enable_symbol_cache = true
symbol_cache_size = 50000
cache_lookup_optimization = true

[monitoring]
# Performance monitoring
enable_realtime_monitoring = true
monitoring_interval_ms = 100
performance_alerts = true
alert_cpu_threshold = 85
alert_memory_threshold = 90

# Metrics collection
collect_execution_metrics = true
collect_compilation_metrics = true
collect_memory_metrics = true
collect_cache_metrics = true

# Dashboard
enable_performance_dashboard = true
dashboard_update_interval_ms = 500
dashboard_history_minutes = 60

[gpu_computing]
# GPU acceleration
enabled = false  # Requires OpenCL/CUDA setup
preferred_platform = auto  # auto, opencl, cuda
min_operations_for_gpu = 1000
gpu_memory_limit_mb = 1024
enable_cpu_fallback = true

# GPU-specific optimizations
vectorized_math_on_gpu = true
parallel_array_ops_on_gpu = true
gpu_memory_pooling = true

[debugging_optimization]
# Debug-optimized builds
enable_in_optimized_builds = false
minimal_overhead_mode = true
breakpoint_optimization = true
watchpoint_caching = true

# Debug data compression
compress_debug_info = true
selective_debug_info = true
debug_info_cache_mb = 64

[io_optimization]
# File I/O optimization
enable_io_buffering = true
read_buffer_size_kb = 64
write_buffer_size_kb = 64
use_memory_mapped_files = true
async_file_operations = true

# Network optimization (if applicable)
enable_connection_pooling = true
max_connections = 100
connection_timeout_ms = 5000
enable_compression = true

[production_settings]
# Production-specific optimizations
optimize_for_latency = true
optimize_for_throughput = false
enable_all_optimizations = true
disable_debug_features = true
enable_error_recovery = true

# Resource limits
max_memory_usage_mb = 4096
max_cpu_cores = 0  # 0 = all available
priority_class = normal  # low, normal, high
process_affinity_mask = 0  # 0 = no affinity

# Startup optimization
precompile_hot_paths = true
preload_symbols = true
warm_up_caches = true
optimize_startup_time = true

[advanced_features]
# Experimental optimizations
enable_profile_guided_optimization = true
enable_link_time_optimization = true
enable_whole_program_optimization = true
enable_feedback_directed_optimization = true

# Machine learning optimizations
enable_ml_predictions = false  # Experimental
ml_model_path = models/performance_predictor.model
prediction_confidence_threshold = 0.85

# Hardware-specific optimizations
enable_cpu_feature_detection = true
optimize_for_current_hardware = true
enable_branch_prediction_hints = true
use_hardware_performance_counters = true

[logging]
# Performance logging
log_level = info  # debug, info, warning, error
log_performance_events = true
log_compilation_events = true
log_optimization_decisions = true

# Log rotation
max_log_size_mb = 100
max_log_files = 10
compress_old_logs = true

# Performance log format
timestamp_format = iso8601
include_thread_id = true
include_process_id = true
include_performance_counters = true

[quality_assurance]
# Performance regression testing
enable_performance_tests = true
performance_baseline_file = performance_baseline.json
regression_threshold_percent = 5.0
run_tests_on_optimization_change = true

# Validation
validate_optimizations = true
enable_correctness_checks = true
compare_optimized_vs_baseline = false  # Expensive
statistical_validation = true

[deployment]
# Deployment-specific settings
deployment_environment = production  # development, staging, production
auto_tune_on_startup = true
collect_deployment_metrics = true
enable_remote_monitoring = false

# Update mechanisms
check_for_performance_updates = true
auto_apply_safe_optimizations = true
rollback_on_performance_degradation = true

# Environment detection
detect_virtualization = true
detect_containerization = true
adapt_to_environment = true